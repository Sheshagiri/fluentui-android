jobs:

  - job: Test Build and Publish
    pool:
      vmImage: ubuntu-latest

    steps:
    - task: Gradle@2
      displayName: 'gradlew build testPublish'
      inputs:
        gradleWrapperFile: 'gradlew'
        tasks: 'build testPublish'
        javaHomeOption: 'JDKVersion'
        jdkVersionOption: '$(jdkVersion)'
        options: '-PappCenterSecret=$(appCenterSecret) -PsigningKeyPassword=$(signingKeyPassword) -PsigningKeyStorePassword=$(signingKeyStorePassword) -POSSRHUsername=$(ossrhUsername) -POSSRHPassword=$(ossrhPassword) -PtestGroupId=$(testGroupId)'
